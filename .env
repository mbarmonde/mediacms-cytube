# dev-v0.3.0 - .env for docker-compose.yaml and other files across the project
# HTTPS-ONLY PROJECT - No HTTP support

#####
# CHANGELOG
# v0.3.0 - Moved required components of the OpenSubtitles API integration to the manual section for common grouping; Added extended to the other remaining features that aren't as critical
#		 - Added FFMPEG ENCODING CONFIGURATION section for centralized encoding settings
#        - New: FFMPEG_TRANSCODE_ENABLED, FFMPEG_RESOLUTIONS, FFMPEG_PRESET
#        - New: FFMPEG_H264_PROFILE, FFMPEG_CRF_H264, FFMPEG_CRF_H265, FFMPEG_CRF_VP9
#        - New: FFMPEG_AUDIO_CODEC, FFMPEG_AUDIO_BITRATE
#        - New: HLS_ENABLED, HLS_SEGMENT_TIME, HLS_FLAGS
#        - Fixes bug where FFMPEG_CRF in local_settings.py was ignored
#        - All encoding settings now centralized in .env for easy configuration
# v0.2.3 - Added OpenSubtitles.com actual user token, removed username and password
# v0.2.2 - Added OpenSubtitles.com API integration configuration
# v0.2.1 - Added quotes to the # CYTUBE INTEGRATION METADATA section
# v0.2.0 - Added DOMAIN and CYTUBE_* variables for centralized config (HTTPS-only)
# v0.1.4 - Added environmental variables for the network name
# v0.1.3 - Added environmental variables for container names
# v0.1.2 - Better search logic for User, Pass, and Email with counts
# v0.1.1 - Removed usernames and passwords
# v0.1.0 - Created
#####

#####
# MANUAL CONFIGURATION SECTION
# These are the ONLY values you need to change for a new deployment
#####

# ============================================
# DEPLOYMENT CONFIGURATION (HTTPS-ONLY)
# ============================================
# Find and Replace YOUR DOMAIN NAME, 1ea
# Example: dev02.420grindhouseserver.com (no https:// prefix)
DOMAIN=YOUR.DOMAIN.NAME

# ============================================
# ADMIN CREDENTIALS
# ============================================
# Find and Replace SUPERADMIN USERNAME, 1ea
# Find and Replace SUPERADMIN EMAIL, 1ea
# Find and Replace SUPERADMIN PASSWORD, 1ea
ADMIN_USER=SUPERADMIN USERNAME
ADMIN_EMAIL=SUPERADMIN EMAIL
ADMIN_PASSWORD=SUPERADMIN PASSWORD

# ============================================
# CYTUBE INTEGRATION METADATA
# ============================================
# Find and Replace CYTUBE DESCRIPTION, 1ea (optional - has default)
# NOTE: Use quotes for values containing spaces
CYTUBE_DESCRIPTION="Custom MediaCMS streaming server for CyTube integration"
CYTUBE_ORGANIZATION="MediaCMS-CyTube"

# ============================================
# OPENSUBTITLES.COM API CONFIGURATION
# ============================================

# Enable/disable automatic subtitle fetching (true/false)
# Set to false to disable entire feature without code changes
OPENSUBTITLES_ENABLED=true

# API Key from opensubtitles.com (consumer key)
OPENSUBTITLES_API_KEY=YOU_API_KEY

# Personal JWT token from OpenSubtitles.com profile (REQUIRED)
# Get from: https://www.opensubtitles.com/en/users/stick_sayer69 (Settings/API section)
OPENSUBTITLES_JWT_TOKEN=YOUR_PERMANENT_JWT_TOKEN_HERE

#####
# SYSTEM CONFIGURATION SECTION
# Do not modify below unless you know what you're doing
#####

# ============================================
# DATABASE CONFIGURATION
# ============================================
POSTGRES_USER=mediacms
POSTGRES_PASSWORD=mediacms
POSTGRES_DB=mediacms

# ============================================
# STORAGE PATHS
# ============================================
MEDIA_FILES_PATH=/mnt/ebs/mediacms_media
POSTGRES_DATA_PATH=../postgres_data

# ============================================
# IMAGE VERSIONS
# ============================================
MEDIACMS_VERSION=latest
POSTGRES_VERSION=17.2-alpine
REDIS_VERSION=alpine
CADDY_VERSION=latest

# ============================================
# CONTAINER NAMES
# ============================================
## DO NOT CHANGE WEB_CONTAINER_NAME from anything but media_cms because of hardcoded MediaCMS conflicts
WEB_CONTAINER_NAME=media_cms
CELERY_BEAT_CONTAINER_NAME=mediacms_celery_beat
CELERY_WORKER_CONTAINER_NAME=mediacms_celery_worker
DB_CONTAINER_NAME=mediacms_db
REDIS_CONTAINER_NAME=mediacms_redis
CADDY_CONTAINER_NAME=mediacms_caddy
NETWORK_NAME=reverse_proxy

# ============================================
# SYSTEM SETTINGS
# ============================================
TZ=America/Los_Angeles

# ============================================
# DEPLOYMENT REPLICAS
# ============================================
WEB_REPLICAS=1
CELERY_WORKER_REPLICAS=1

# ============================================
# FFMPEG ENCODING CONFIGURATION
# ============================================
# Video transcoding settings for uploaded content
# All uploads are normalized to consistent streaming format for CyTube

# Enable/disable video transcoding (true/false)
# Set to false to disable encoding (serve original files only)
FFMPEG_TRANSCODE_ENABLED=true

# Comma-separated list of resolutions to encode (no spaces)
# Smart encode will skip resolutions higher than source resolution
# Options: 144,240,360,480,720,1080,1440,2160
# Recommended for movies: 480,720,1080 (balance quality/storage)
FFMPEG_RESOLUTIONS=480,720,1080

# FFmpeg encoding preset (speed vs quality tradeoff)
# Options: ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow
# Recommended for movies: faster (best quality/efficiency balance)
# - faster: ~1.5-2x realtime, excellent quality, ~10-15% smaller files than veryfast
# - veryfast: ~1x realtime, good quality, faster encoding but larger files
# - medium: ~3-4x realtime, best quality but too slow for server use
FFMPEG_PRESET=faster

# H.264 profile for encoding (compatibility vs compression)
# Options: baseline (old devices), main (recommended), high (best compression)
# Recommended: main (works on all modern devices, better compression than baseline)
FFMPEG_H264_PROFILE=main

# CRF (Constant Rate Factor) for quality control (lower = better quality, larger files)
# H.264 CRF range: 18-28 (23 is default)
# Recommended for movies: 22 (noticeably better quality, only ~5-8% larger files)
# - CRF 18-21: Very high quality, large files (archive/master copies)
# - CRF 22: High quality, recommended for movies (better detail preservation)
# - CRF 23: Default quality, good for general content
# - CRF 24-28: Lower quality, smaller files (not recommended for movies)
FFMPEG_CRF_H264=22

# H.265/HEVC CRF (future codec support, not currently used)
# H.265 CRF range: 20-32 (28 is default, equivalent to H.264 CRF 23)
FFMPEG_CRF_H265=28

# VP9 CRF (future codec support, not currently used)
# VP9 CRF range: 24-40 (32 is default)
FFMPEG_CRF_VP9=32

# Audio codec for all encoded videos
# Options: aac (recommended for HLS), opus, mp3
# Recommended: aac (required for HLS, best compatibility)
FFMPEG_AUDIO_CODEC=aac

# Audio bitrate (quality vs file size)
# Options: 96k, 128k, 192k, 256k
# Recommended: 128k (standard for streaming, good quality)
FFMPEG_AUDIO_BITRATE=128k

# ============================================
# HLS STREAMING CONFIGURATION
# ============================================
# HLS (HTTP Live Streaming) settings for adaptive streaming to CyTube

# Enable/disable HLS streaming (true/false)
# CRITICAL: Must be true for CyTube integration
# CyTube requires application/x-mpegURL content type (HLS)
HLS_ENABLED=true

# HLS segment duration in seconds
# Options: 2-10 seconds (6 is Apple standard)
# Recommended: 6 (balance between startup time and switching speed)
# - Shorter segments (2-4): Faster quality switching, more HTTP requests
# - Longer segments (8-10): Fewer requests, slower quality switching
HLS_SEGMENT_TIME=6

# HLS encoding flags for segment generation
# Options: independent_segments (recommended), single_file, temp_file
# Recommended: independent_segments (ensures proper segment boundaries)
HLS_FLAGS=independent_segments

# ============================================
# OPENSUBTITLES.COM API EXTENDED CONFIGURATION
# ============================================
# OpenSubtitles.com REST API integration for automatic subtitle fetching
# Documentation: https://opensubtitles.stoplight.io/docs/opensubtitles-api

# Comma-separated list of language codes to fetch (ISO 639-1 format)
# Example: en,es,fr for English, Spanish, French
# Current: English only
OPENSUBTITLES_LANGUAGES=en

# Automatically download subtitles after encoding completes (true/false)
# true = automatic fetching, false = manual trigger only
OPENSUBTITLES_AUTO_DOWNLOAD=true

# Maximum number of subtitle results to evaluate per search (default: 10)
# Higher values may find better matches but increase API calls
OPENSUBTITLES_MAX_RESULTS=10

# User-Agent string for API requests (required by OpenSubtitles)
# Do not change unless instructed by OpenSubtitles support
OPENSUBTITLES_USER_AGENT=MediaCMS-CyTube/1.0

# API Base URL (do not change unless using different endpoint)
OPENSUBTITLES_API_URL=https://api.opensubtitles.com/api/v1
